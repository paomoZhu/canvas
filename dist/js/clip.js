function rubberhandStart(e,n){mousedown.x=e,mousedown.y=n,rubberhandRectangle.left=mousedown.x,rubberhandRectangle.top=mousedown.y,moveRubberhandDiv(),showRubberhandDiv(),dragging=!0}function rubberhandStretch(e,n){rubberhandRectangle.left=e<mousedown.x?e:mousedown.x,rubberhandRectangle.top=n<mousedown.y?n:mousedown.y,rubberhandRectangle.width=Math.abs(e-mousedown.x),rubberhandRectangle.height=Math.abs(n-mousedown.y),moveRubberhandDiv(),resizeRubberhandDiv()}function rubberhandEnd(){var e=canvas.getBoundingClientRect();try{context.drawImage(canvas,rubberhandRectangle.left-e.left,rubberhandRectangle.top-e.top,rubberhandRectangle.width,rubberhandRectangle.height,0,0,canvas.width,canvas.height)}catch(e){}resetRubberhandRectangle(),rubberhandDiv.style.width=0,rubberhandDiv.style.height=0,hideRubberhandDiv(),dragging=!1}function moveRubberhandDiv(){rubberhandDiv.style.top=rubberhandRectangle.top+"px",rubberhandDiv.style.left=rubberhandRectangle.left+"px"}function resizeRubberhandDiv(){rubberhandDiv.style.width=rubberhandRectangle.width+"px",rubberhandDiv.style.height=rubberhandRectangle.height+"px"}function showRubberhandDiv(){rubberhandDiv.style.display="inline"}function hideRubberhandDiv(){rubberhandDiv.style.display="none"}function resetRubberhandRectangle(){rubberhandRectangle={top:0,left:0,width:0,height:0}}var rubberhandDiv=document.getElementById("rubberhandDiv"),resetButton=document.getElementById("resetButton"),image=new Image,mousedown={},rubberhandRectangle={},dragging=!1;canvas.onmousedown=function(e){var n=e.clientX,t=e.clientY;e.preventDefault(),rubberhandStart(n,t)},window.onmousemove=function(e){var n=e.clientX,t=e.clientY;e.preventDefault(),dragging&&rubberhandStretch(n,t)},window.onmouseup=function(e){e.preventDefault(),rubberhandEnd()},image.onload=function(){context.drawImage(image,0,0,canvas.width,canvas.height)},resetButton.onclick=function(e){context.clearRect(0,0,canvas.width,canvas.height),context.drawImage(image,0,0,canvas.width,canvas.height)},image.src="image/scene.jpg";