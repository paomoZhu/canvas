<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>T·R·Y</title>
    <link rel="icon" type="image/x-icon" href="dist/image/favicon.ico">
    <!--<link rel="stylesheet" href="try/css/main.css">-->
    <link rel="stylesheet" href="lib/materialize-css/css/materialize.min.css">
    <!--<link rel="stylesheet" href="dist/css/template/style.css">-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <style>
        .valign-demo{
            background-color: #efefef;
            color: #ccc;
            height: 800px;
            width: 100%;
        }

        .valign-demo h5{
            line-height:800px;
        }
    </style>
    <!--<link rel="stylesheet" href="css/main.css">-->
    <!--<link rel="stylesheet" href="css/sprit.css">-->
    <!--<link rel="stylesheet" href="css/clip.css">-->
</head>
<body style="background: -webkit-linear-gradient(top left, #fdfbfb, #ebedee);">
<!--<nav class="white" role="navigation">-->
    <!--<div class="nav-wrapper container">-->
        <!--<a id="logo-container" href="#" class="brand-logo">-->
            <!--<img src="dist/image/favicon.ico" class="logo-image" alt="">-->
        <!--</a>-->
        <!--<ul class="right hide-on-med-and-down">-->
            <!--<li><a href="dist/html/go.html">戳我</a></li>-->
        <!--</ul>-->
        <!--<a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a>-->
    <!--</div>-->
<!--</nav>-->

<!--<div id="index-banner" class="parallax-container">-->
    <!--<div class="section no-pad-bot">-->
        <!--<div class="container">-->
            <!--<br><br>-->
            <!--<h1 class="header center teal-text text-lighten-2">衣·食·住·行</h1>-->
            <!--<div class="row center">-->
                <!--<h5 class="header col s12 light">简单·健康·舒适·随心</h5>-->
            <!--</div>-->
            <!--<div class="row center">-->
                <!--<a href="#" id="download-button" class="btn-large waves-effect waves-light teal lighten-1">开始</a>-->
            <!--</div>-->
            <!--<br><br>-->

        <!--</div>-->
    <!--</div>-->
    <!--<div class="parallax"><img src="dist/image/background1.jpg" alt="Unsplashed background img 1"></div>-->
<!--</div>-->


<!--<div class="container">-->
    <!--<div class="section">-->

        <!--&lt;!&ndash;   Icon Section   &ndash;&gt;-->
        <!--<div class="row">-->
            <!--<div class="col s12 m4">-->
                <!--<div class="icon-block">-->
                    <!--<h2 class="center brown-text"><a href="dist/html/rubber-bands.html">橡皮擦</a></h2>-->
                    <!--<h5 class="center">可交互</h5>-->
                    <!--<p class="light">自助线条生成器</p>-->
                <!--</div>-->
            <!--</div>-->

            <!--<div class="col s12 m4">-->
                <!--<div class="icon-block">-->
                    <!--<h2 class="center brown-text"><a href="dist/html/board.html">仪表盘</a></h2>-->
                    <!--<h5 class="center">大大的</h5>-->
                    <!--<p class="light">飙车爱好者进</p>-->
                <!--</div>-->
            <!--</div>-->

            <!--<div class="col s12 m4">-->
                <!--<div class="icon-block">-->
                    <!--<h2 class="center brown-text"><a href="dist/html/bezier.html">贝塞尔曲线</a></h2>-->
                    <!--<h5 class="center">国国国</h5>-->
                    <!--<p class="light">-->
                        <!--<a href="dist/html/bezier_2.html">圆角三角</a>-->
                        <!--<a href="dist/html/bezier_3.html">三次曲线</a>-->
                        <!--<a href="dist/html/bezier_edit.html">三次曲线</a>-->
                    <!--</p>-->
                <!--</div>-->
            <!--</div>-->
        <!--</div>-->

    <!--</div>-->
<!--</div>-->


<!--<div class="parallax-container valign-wrapper">-->
    <!--<div class="section no-pad-bot">-->
        <!--<div class="container">-->
            <!--<div class="row center">-->
                <!--<h5 class="header col s12 light">简单·健康·舒适·随心</h5>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="parallax"><img src="dist/image/background2.jpg" alt="Unsplashed background img 2"></div>-->
<!--</div>-->

<!--<div class="container">-->
    <!--<div class="section">-->

        <!--<div class="row">-->
            <!--<div class="col s12 center">-->
                <!--<h3><i class="mdi-content-send brown-text"></i></h3>-->
                <!--<h4>说·学·逗·唱</h4>-->
                <!--<p class="left-aligh light">-->
                    <!--i 啊；是的；啊话说的；哦午睡；哦滴；哦啊速度；哦哎速度；哦球赛的；i 啊 u 说；的六啊；哦说据大会速发 i哼；啊爽发酥个老大浪费的后果各级政府管理好了和联合国联合管理好了人工湖阿尔；i 好aerie； 爱而活；事儿； 啊恶化感染啊哈-->
                <!--</p>-->
            <!--</div>-->
        <!--</div>-->

    <!--</div>-->
<!--</div>-->


<!--<div class="parallax-container valign-wrapper">-->
    <!--<div class="section no-pad-bot">-->
        <!--<div class="container">-->
            <!--<div class="row center">-->
                <!--<h5 class="header col s12 light">简单·健康·舒适·随心</h5>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="parallax"><img src="dist/image/background3.jpg" alt="Unsplashed background img 3"></div>-->
<!--</div>-->

<!--<footer class="page-footer teal">-->
    <!--<div class="container">-->
        <!--<div class="row">-->
            <!--<div class="col l6 s12">-->
                <!--<h5 class="white-text">阿西吧</h5>-->
                <!--<p class="grey-text text-lighten-4">哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈哈</p>-->


            <!--</div>-->
            <!--<div class="col l3 s12">-->
                <!--<h5 class="white-text">设置</h5>-->
                <!--<ul>-->
                    <!--<li><a class="white-text" href="#!">1</a></li>-->
                    <!--<li><a class="white-text" href="#!">2</a></li>-->
                    <!--<li><a class="white-text" href="#!">3</a></li>-->
                    <!--<li><a class="white-text" href="#!">4</a></li>-->
                <!--</ul>-->
            <!--</div>-->
            <!--<div class="col l3 s12">-->
                <!--<h5 class="white-text">设置</h5>-->
                <!--<ul>-->
                    <!--<li><a class="white-text" href="#!">1</a></li>-->
                    <!--<li><a class="white-text" href="#!">2</a></li>-->
                    <!--<li><a class="white-text" href="#!">3</a></li>-->
                    <!--<li><a class="white-text" href="#!">4</a></li>-->
                <!--</ul>-->
            <!--</div>-->
        <!--</div>-->
    <!--</div>-->
    <!--<div class="footer-copyright">-->
        <!--<div class="container">-->
            <!--Made by <a class="brown-text text-lighten-3" href="#">Materialize</a>-->
        <!--</div>-->
    <!--</div>-->
<!--</footer>-->

<div class="container">
    <div class="row">
        <div class="col s12 right">
            <h3 class="right" style="font-family: 'Roboto', sans-serif; font-weight: 300">标签云</h3>
        </div>
    </div>
    <div class="row" style="margin-bottom: 0">
        <form class="col s12">
            <div class="row">
                <div class="input-field col s12">
                    <textarea id="sourceword" class="materialize-textarea"></textarea>
                    <label for="sourceword">内容</label>
                </div>
            </div>
        </form>
    </div>

    <div class="row">
        <div class="col s12">
            <button class="create btn waves-effect waves-light" onclick="showIt()">生成标签云
                <i class="Small material-icons right">send</i>
            </button>
        </div>
    </div>

    <div class="row">
        <div class="col s12">
            <div class="valign-demo" style="background-color: transparent;">
                <h5 class="center">来点内容吧！</h5>
            </div>

            <canvas style="float: right;display: block;" class="center" id="word_cloud_canvas"></canvas>
        </div>
    </div>

</div>



</body>
<!--<script src="dist/js/preHandle.js"></script>-->
<!--<script src="js/example1.js"></script>-->
<!--<script src="js/clock.js"></script>-->
<!--<script src="js/sprit.js"></script>-->
<!--<script src="js/clip.js"></script>-->
<!--<script src="js/Graphical/rect.js"></script>-->
<!--<script src="dist/js/Graphical/path.js"></script>-->

<script src="lib/jquery.js"></script>
<script src="lib/materialize-css/js/materialize.min.js"></script>
<script src="dist/js/template/init.js"></script>
<script src="dist/js/interactive/word_cloud.js"></script>
<script>
    function showIt()
    {
//	var _E=function(id){return document.getElementById(id)};
//	var config={
//		minstep:		parseInt(_E("minstep").value),			//最小检测范围
//		width:			parseInt(_E("width").value),
//		height:			parseInt(_E("height").value),
//		bgcolor:		_E("bgcolor").value,					//画布背景色
//		default_family: _E("default_family").value,				//默认字体
//		default_bold:	_E("default_bold").value,				//值为bold，字体加租
//		default_color:	_E("default_color").value||[],			//文字颜色取值范围
//		rotate_chance:	parseInt(_E("rotate_chance").value),	//文字旋转几率0-100
//		size_zoom:		parseInt(_E("size_zoom").value),		//放大比例
//		min_size:		parseInt(_E("min_size").value),			//最小字体
//		spacing:		parseInt(_E("spacing").value),			//词间隔
//		speed:			parseInt(_E("speed").value)				//生成时间间隔
//	};
//	console.log(JSON.stringify(config));

        var config = {"minstep":10,"width":800,"height":800,"bgcolor":"#FFFFFF","default_family":"Arial","default_bold":"","default_color":[],"rotate_chance":100,"size_zoom":6,"min_size":14,"spacing":3,"speed":0};


        var wd=new word_cloud(config);
        var data=[];
        var value=document.getElementById("sourceword").value;

//	[ 数据格式
//	    '12 测试'
//	]

        $.ajax({
            url: 'http://route.showapi.com/941-1',
            data: {
                "showapi_appid": '47403',
                "showapi_sign": '230ec1adf0c0427eabf853e47bc732e5',
                "text": value,
                "num": 100
            },
            dataType: 'json',
            success: function(rep){
                var repData, data = [], vlist;

                if(rep.showapi_res_code === -1) {
                    $('.input-field label').css({
                        color: 'red'
                    });

                    return false;
                }

                $('.input-field label').css({
                    color: '#9e9e9e'
                });

                if(rep.showapi_res_body["ret_code"] === 0){
                    $('.valign-demo').hide();
                    repData = rep.showapi_res_body.list || [];
                }

                var vlist=jiaquan(repData);

                function jiaquan(arr){

                    return arr.map(function(text, index){

                        if(index === 0){
                            text = '33 ' + text + ' #123456';
                        }

                        if(index ===1){
                            text = '22 ' + text;
                        }

                        if(index > 1 && index <= 2){
                            text = '21 ' + text;
                        }

                        if(index > 2 && index <= 3){
                            text = '20 ' + text;
                        }

                        if(index > 3 && index <= 4){
                            text = '12 ' + text;
                        }

                        if(index > 4 && index <= 5){
                            text = '8 ' + text;
                        }

                        if(index > 5 && index <= 6){
                            text = '7 ' + text;
                        }

                        if(index > 6 && index <= 8){
                            text = '7 ' + text;
                        }

                        if(index > 8 && index <= 12){
                            text = '5 ' + text;
                        }

                        if(index > 12 && index <= 15){
                            text = '5 ' + text;
                        }

                        if(index > 15 && index <= 20){
                            text = '5 ' + text;
                        }

                        if(index > 20 && index <= 30){
                            text = '4 ' + text;
                        }

                        if(index > 30){
                            text = '2 ' + text;
                        }

                        return text;
                    });

                }

                for(var i=0;i<vlist.length;i++)
                {
                    data.push(vlist[i].split(/\s+/g));
                }

                $('.create').attr('disabled', true);

                wd.show(data, function(){
                    $('.create').attr('disabled', false);
                });
            },
            error: function(err){
                alert(err);
            }
        });


    }
</script>
</html>
